<form [formGroup]="form" (ngSubmit)="onSubmit()">
    <h2 class="text-xl font-semibold mb-4">{{ headerText }}</h2>

    <div class="mb-4" *ngFor="let field of fields">
      <ng-container *ngIf="field.input?.type !== 'checkbox'; else inputLabelInline">
        <label [for]="field.controlName" class="block mb-1 text-sm font-medium">{{ field.label }}</label>

        <input
          *ngIf="field.input"
          [type]="field.input.type"
          class="w-full border rounded px-3 py-2"
          [id]="field.controlName"
          [formControlName]="field.controlName"
          [placeholder]="field.input.placeholder ?? 'Enter the value'"
          autocomplete="off"
        />
      </ng-container>

      <ng-template #inputLabelInline>
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center">
            <input
              type="checkbox"
              [id]="field.controlName"
              [formControlName]="field.controlName"
              class="h-4 w-4 text-blue-600 border-gray-300 rounded"
              autocomplete="off"
            >
            <label
              [for]="field.controlName"
              class="ml-2 text-sm font-medium"
            >
              {{ field.label }}
            </label>
          </div>
        </div>
      </ng-template>

      <select
        *ngIf="field.select"
        [formControlName]="field.controlName"
        class="w-full border rounded px-3 py-2 {{ field.select.options.length === 0 ? 'cursor-not-allowed text-gray-300' : '' }}"
      >
        <option *ngIf="field.select.optionCaption" value="">{{ field.select.optionCaption }}</option>
        <option *ngFor="let option of field.select.options" [value]="option.value">
          {{ option.key }}
        </option>
      </select>

      <app-date-picker
        *ngIf="field.dateTimePicker"
        [formControlName]="field.controlName">
      </app-date-picker>

      <textarea
        *ngIf="field.textArea"
        [formControlName]="field.controlName"
        class="w-full h-32 border border-black rounded px-3 py-2 resize-none"
      ></textarea>

      <app-form-error [form]="form" [controlName]="field.controlName"></app-form-error>
    </div>

    <div class="flex justify-end space-x-2 mt-6">
      <button type="submit"
              [disabled]="form.invalid"
              class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded disabled:opacity-50">
        {{ submitButtonText }}
      </button>

      <button type="button"
              (click)="onCancel()"
              class="bg-gray-300 hover:bg-gray-400 px-4 py-2 rounded">
        {{ cancelButtonText }}
      </button>
    </div>
  </form>
