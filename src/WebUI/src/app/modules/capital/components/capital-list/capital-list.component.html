<div class="cp-lh">
  <div class="ta">
    <span class="ta-text">Total:</span>
    <span class="ta-sum">{{ totalCapitalAmount() | currency: symbol(mainCurrency) }}</span>
  </div>

  <div class="cp-bar">
    <div class="cp-search">
      <mat-icon>search</mat-icon>
      <input placeholder="Search for..." maxlength="24" />
    </div>

    <div class="cp-sort">
      <label>Sort by:</label>
      <select>
        <option>name</option>
        <option>balance</option>
        <option>expenses</option>
        <option>incomes</option>
        <option>transfers in</option>
        <option>transfers out</option>
      </select>
    </div>

    <div class="cp-currency">
      <span>Default currency:</span>
      <app-currency [currency]="mainCurrency" (currencyChange)="onCurrencyChange($event)"></app-currency>
    </div>

    <button (click)="openToCreateCapitalDialog()" title="Create new">
      <mat-icon class="btn-create-icon">add_circle</mat-icon>
    </button>
  </div>
</div>

<div class="cp-list" *ngIf="capitals?.length">
  <div *ngFor="let capital of capitals">
    <a class="cp" [routerLink]="[capital.id]">
      <div class="cp-name">{{ capital.name }}</div>

      <div class="cp-balance" title="Balance">
        {{ capital.balance | currency: symbol(capital.currency) }}
      </div>

      <div class="cp-props">
        <div class="cp-props-item cp-incomes" title="Incomes">
          <mat-icon>attach_money</mat-icon>
          {{ capital.totalIncome }}
        </div>

        <div class="cp-props-item cp-expenses" title="Expenses">
          <mat-icon>money_off</mat-icon>
          {{ capital.totalExpense }}
        </div>

        <div class="cp-props-item" title="Transfer Out">
          <mat-icon>arrow_upward</mat-icon>
          {{ capital.totalTransferOut }}
        </div>

        <div class="cp-props-item" title="Transfer In">
          <mat-icon>arrow_downward</mat-icon>
          {{ capital.totalTransferIn }}
        </div>
      </div>

      <div class="cp-detail-actions">
        <button class="cp-d-act cp-delete" (click)="removeCapital(capital.id, $event)" title="Remove">
            <mat-icon>delete_outline</mat-icon>
        </button>

        <button
          *ngIf="capital.includeInTotal; else notIncludedInTotal"
          class="cp-d-act cp-visible"
          (click)="toggleVisible(capital.includeInTotal, $event)"
          title="Included in Total balance">
            <mat-icon>visibility</mat-icon>
        </button>

        <ng-template #notIncludedInTotal>
          <button
            class="cp-d-act cp-visible"
            (click)="capital.includeInTotal = true"
            title="Not Included in Total balance">
              <mat-icon>visibility_off</mat-icon>
          </button>
        </ng-template>
      </div>
    </a>
  </div>
</div>
