<div class="cp-lh">
  <div class="ta">
    <span class="ta-text">Total:</span>
    <span class="ta-sum">{{ totalCapitalAmount() | currency: symbol(mainCurrency) }}</span>
  </div>

  <div class="cp-bar">
    <div class="cp-search">
      <app-icon [name]="'fa-search'"></app-icon>
      <input placeholder="Search for..." maxlength="24" [(ngModel)]="searchTerm" (ngModelChange)="onSearchChange()" />
    </div>

    <div class="cp-sort">
      <label>Sort by:</label>
      <select [(ngModel)]="selectedSortOption" (change)="onSortChange($event)">
        <option *ngFor="let option of sortOptions" [value]="option">{{ option }}</option>
      </select>

      <button class="sort-direction" (click)="toggleSortDirection()" [title]="sortDirection === 'asc' ? 'Ascending' : 'Descending'">
        <app-icon [name]="sortDirection === 'asc' ? 'fa-arrow-up' : 'fa-arrow-down'"></app-icon>
      </button>
    </div>

    <div class="cp-currency">
      <span>Default currency:</span>
      <app-currency [currency]="mainCurrency" (currencyChange)="onCurrencyChange($event)"></app-currency>
    </div>

    <button (click)="openToCreateCapitalDialog()" title="Create new">
      <app-icon class="btn-create-icon" [name]="'fa-circle-plus'"></app-icon>
    </button>
  </div>
</div>

<div class="cp-list" *ngIf="capitals?.length; else noCapitals">
  <div class="cp-contain" *ngFor="let capital of capitals">
    <a class="cp" [routerLink]="[capital.id]">
      <div class="cp-name">{{ capital.name }}</div>
      <div class="cp-balance" title="Balance">
        {{ capital.balance | currency: symbol(capital.currency) }}
      </div>

      <div class="cp-props">
        <div *ngFor="let propsItem of propsItems"
          class="cp-props-item"
          [title]="propsItem.title"
          [ngClass]="propsItem.style"
        >
          <app-icon [name]="propsItem.icon"></app-icon>
          {{ capital[propsItem.key] }}
        </div>
      </div>
    </a>

    <div class="cp-detail-actions">
      <button
        title="Remove"
        class="cp-d-act cp-delete"
        (click)="removeCapital(capital.id)"
      >
        <app-icon [name]="'fa-trash'"></app-icon>
      </button>

      <button
        title="Toggle Visibility"
        class="cp-d-act cp-visible"
        (click)="toggleVisible(capital)"
      >
        <app-icon [name]="capital.includeInTotal ? 'fa-eye' : 'fa-eye-slash'"></app-icon>
      </button>
    </div>
  </div>
</div>

<ng-template #noCapitals>
  <p class="no-data">No capitals</p>
</ng-template>
